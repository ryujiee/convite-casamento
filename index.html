<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Lista de Convidados - Eduardo & Emilly</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonte script parecida com convite -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #ffeef5;
      --bg-soft: #fff4fa;
      --bg-card: #ffffff;
      --bg-card-soft: #fdf8ff;
      --border-soft: #f1d6e6;
      --border-strong: #f3c0dc;
      --accent: #ff6fae;
      --accent-strong: #ff4f93;
      --accent-soft: rgba(255, 111, 174, 0.1);
      --accent-soft-2: rgba(255, 111, 174, 0.18);
      --accent-blue: #9bd4ff;
      --text-main: #5b3455;
      --text-soft: #8c607e;
      --text-muted: #b28aaa;
      --danger: #ff3b6f;
      --radius-lg: 22px;
      --radius-md: 14px;
      --radius-sm: 10px;
      --shadow-soft: 0 16px 40px rgba(220, 105, 155, 0.22);
      --shadow-card: 0 16px 40px rgba(212, 151, 207, 0.26);
      --transition-fast: 0.16s ease-out;
      --transition-med: 0.24s ease-out;
      --font-main: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      --font-script: "Great Vibes", cursive;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      padding: 24px 16px 40px;
      font-family: var(--font-main);
      color: var(--text-main);
      background: radial-gradient(circle at top left, #ffe2f1 0, #ffeef9 25%, #f4f6ff 60%, #f2fbff 100%);
      display: flex;
      align-items: flex-start;
      justify-content: center;
      position: relative;
      overflow-x: hidden;
    }

    /* Cora√ß√µes flutuando de leve */
    body::before,
    body::after {
      content: "‚ù§ ‚ù§ ‚ù§ ‚ù§ ‚ù§ ‚ù§";
      position: fixed;
      top: -40px;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 18px;
      letter-spacing: 40px;
      color: rgba(255, 140, 180, 0.35);
      animation: hearts 18s linear infinite;
      pointer-events: none;
      z-index: 0;
    }

    body::after {
      animation-duration: 22s;
      animation-delay: -8s;
      opacity: 0.6;
    }

    @keyframes hearts {
      0% {
        transform: translateY(0) translateX(0);
      }
      100% {
        transform: translateY(120vh) translateX(12px);
      }
    }

    .app {
      position: relative;
      width: 100%;
      max-width: 1180px;
      background: radial-gradient(circle at top, #ffeef9 0, #ffffff 40%, #fdf7ff 100%);
      border-radius: 28px;
      border: 1px solid rgba(255, 255, 255, 0.9);
      box-shadow: var(--shadow-card);
      padding: 20px 18px 22px;
      overflow: hidden;
      z-index: 1;
    }

    @media (min-width: 768px) {
      .app {
        padding: 22px 26px 26px;
      }
    }

    .app::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 15% 0, rgba(255, 176, 205, 0.8), transparent 60%),
        radial-gradient(circle at 85% 0, rgba(155, 212, 255, 0.9), transparent 60%);
      opacity: 0.28;
      pointer-events: none;
      z-index: -1;
    }

    header {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 16px;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
    }

    .title-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .title-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    h1 {
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #b14581;
      font-weight: 700;
    }

    .tag-love {
      padding: 4px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255, 176, 205, 0.9);
      background: linear-gradient(135deg, rgba(255, 202, 230, 0.9), rgba(255, 255, 255, 0.9));
      display: inline-flex;
      align-items: center;
      gap: 7px;
      font-size: 0.76rem;
      color: #b14581;
      box-shadow: 0 6px 16px rgba(255, 176, 205, 0.5);
    }

    .tag-love span:first-child {
      font-size: 1rem;
    }

    .subtitle {
      font-size: 0.82rem;
      color: var(--text-soft);
    }

    .names-script {
      margin-top: 2px;
      font-family: var(--font-script);
      font-size: 1.45rem;
      color: #c35a8d;
    }

    .header-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    button,
    select {
      font-family: inherit;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 7px 15px;
      font-size: 0.78rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 7px;
      transition: transform var(--transition-fast), box-shadow var(--transition-fast),
                  background var(--transition-fast), color var(--transition-fast), opacity var(--transition-fast);
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: #fff;
      box-shadow: 0 12px 26px rgba(255, 126, 183, 0.65);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 32px rgba(255, 126, 183, 0.85);
    }

    .btn-outline {
      background: rgba(255, 255, 255, 0.9);
      color: var(--text-soft);
      border: 1px solid rgba(244, 183, 213, 0.9);
      box-shadow: 0 8px 20px rgba(244, 183, 213, 0.4);
    }

    .btn-outline:hover {
      background: #fff7fb;
      transform: translateY(-1px);
    }

    .btn-outline-alt {
      background: transparent;
      color: var(--text-soft);
      border: 1px solid rgba(241, 198, 225, 0.9);
      box-shadow: none;
    }

    .btn-outline-alt:hover {
      background: rgba(255, 255, 255, 0.7);
      transform: translateY(-1px);
    }

    .btn-icon {
      padding: 0;
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 1px solid rgba(244, 183, 213, 0.9);
      background: #fff;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      color: var(--text-soft);
      box-shadow: 0 8px 18px rgba(244, 183, 213, 0.6);
    }

    .btn-icon:hover {
      background: #fff3fb;
      transform: translateY(-1px);
    }

    .btn-danger {
      border-color: rgba(255, 102, 151, 0.9);
      color: var(--danger);
      box-shadow: none;
      background: #fff3f6;
    }

    .btn-danger:hover {
      background: #ffe1eb;
      transform: translateY(-1px);
    }

    .chip {
      display: inline-flex;
      align-items: center;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(243, 206, 226, 0.8);
      font-size: 0.7rem;
      color: var(--text-soft);
      gap: 4px;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 2fr);
      gap: 16px;
      margin-top: 8px;
    }

    @media (max-width: 880px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(245, 200, 225, 0.9);
      padding: 14px 16px 16px;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .card::after {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at top left, rgba(255, 193, 217, 0.5), transparent 65%);
      opacity: 0.35;
      pointer-events: none;
      z-index: -1;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .card-title {
      font-size: 0.86rem;
      font-weight: 700;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #b14581;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-subtitle {
      font-size: 0.78rem;
      color: var(--text-soft);
      margin-top: 1px;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 10px;
    }

    @media (max-width: 720px) {
      .stats {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .stat-card {
      border-radius: 18px;
      padding: 8px 10px 9px;
      background: linear-gradient(135deg, #ffe9f3, #fff);
      border: 1px solid rgba(245, 200, 225, 0.9);
      display: flex;
      flex-direction: column;
      gap: 2px;
      position: relative;
      overflow: hidden;
    }

    .stat-label {
      font-size: 0.7rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .stat-value {
      font-size: 1rem;
      font-weight: 700;
      color: var(--text-main);
    }

    .stat-badge {
      font-size: 0.72rem;
      color: var(--text-soft);
    }

    .badge-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      display: inline-block;
    }

    .dot-all {
      background: linear-gradient(135deg, #ffb347, #ff6f69);
    }

    .dot-confirmed {
      background: linear-gradient(135deg, #34d399, #22c55e);
    }

    .dot-maybe {
      background: linear-gradient(135deg, #facc15, #f97316);
    }

    .dot-declined {
      background: linear-gradient(135deg, #fb7185, #ef4444);
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px 10px;
      margin-top: 4px;
    }

    @media (max-width: 640px) {
      .form-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
    }

    input[type="text"],
    select,
    textarea {
      background: #ffffff;
      border-radius: var(--radius-md);
      border: 1px solid rgba(242, 203, 224, 0.9);
      color: var(--text-main);
      padding: 7px 10px;
      font-size: 0.82rem;
      outline: none;
      transition: border-color var(--transition-fast),
        box-shadow var(--transition-fast),
        background var(--transition-fast),
        transform var(--transition-fast);
    }

    textarea {
      resize: vertical;
      min-height: 60px;
      max-height: 120px;
    }

    input[type="text"]:focus,
    select:focus,
    textarea:focus {
      border-color: rgba(255, 134, 193, 0.9);
      box-shadow: 0 0 0 1px rgba(255, 182, 214, 0.8);
      background: #fff9fd;
      transform: translateY(-0.5px);
    }

    input::placeholder,
    textarea::placeholder {
      color: rgba(190, 143, 170, 0.7);
    }

    .form-footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 8px;
      gap: 6px;
      flex-wrap: wrap;
    }

    .edit-notice {
      margin-top: 8px;
      padding: 6px 9px;
      border-radius: 999px;
      background: rgba(255, 244, 252, 0.9);
      border: 1px dashed rgba(249, 168, 212, 0.9);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      font-size: 0.75rem;
      color: var(--text-soft);
    }

    .edit-notice strong {
      color: #c14983;
    }

    .edit-notice button {
      font-size: 0.72rem;
      padding-inline: 10px;
      border-radius: 999px;
      border: 1px solid rgba(248, 173, 213, 0.9);
      background: #fff;
      cursor: pointer;
      color: var(--text-soft);
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
      align-items: center;
      justify-content: space-between;
    }

    .filters-left,
    .filters-right {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }

    .input-inline {
      position: relative;
    }

    .input-inline input {
      padding-left: 26px;
      padding-right: 9px;
    }

    .input-inline span {
      position: absolute;
      left: 9px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.8rem;
      opacity: 0.65;
    }

    .select-compact {
      padding: 5px 22px 5px 10px;
      font-size: 0.74rem;
      border-radius: 999px;
      background: #fff;
      border-color: rgba(242, 203, 224, 0.9);
      color: var(--text-soft);
    }

    .table-wrapper {
      max-height: 380px;
      overflow: auto;
      border-radius: 18px;
      border: 1px solid rgba(244, 197, 222, 0.98);
      background: #fffdfd;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
    }

    thead {
      position: sticky;
      top: 0;
      background: linear-gradient(180deg, #fff7fd 0, #ffffff 85%);
      z-index: 2;
    }

    th,
    td {
      padding: 7px 8px;
      border-bottom: 1px solid rgba(244, 205, 224, 0.65);
      text-align: left;
      vertical-align: middle;
    }

    th {
      font-size: 0.72rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-muted);
      white-space: nowrap;
      background: transparent;
    }

    tbody tr {
      transition: background var(--transition-fast), transform var(--transition-fast);
    }

    tbody tr:hover {
      background: #fff4fb;
      transform: translateY(-0.5px);
    }

    .col-name {
      width: 30%;
    }

    .col-side {
      width: 16%;
      white-space: nowrap;
    }

    .col-status {
      width: 20%;
    }

    .col-notes {
      width: 24%;
    }

    .col-actions {
      width: 10%;
      text-align: right;
      white-space: nowrap;
    }

    .status-select {
      width: 100%;
      padding: 5px 8px;
      border-radius: 999px;
      font-size: 0.78rem;
      border-width: 1px;
    }

    .status-pending {
      border-color: rgba(148, 163, 184, 0.8);
      background: #f9fafb;
      color: #475569;
    }

    .status-confirmed {
      border-color: rgba(34, 197, 94, 0.96);
      background: #ecfdf3;
      color: #15803d;
    }

    .status-maybe {
      border-color: rgba(234, 179, 8, 0.96);
      background: #fef9c3;
      color: #92400e;
    }

    .status-declined {
      border-color: rgba(239, 68, 68, 0.96);
      background: #fef2f2;
      color: #b91c1c;
    }

    .pill-side {
      display: inline-flex;
      align-items: center;
      padding: 3px 9px;
      border-radius: 999px;
      font-size: 0.7rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      gap: 6px;
      border: 1px solid rgba(244, 183, 213, 0.9);
      background: #fff6fb;
      color: #b14581;
    }

    .pill-side span:first-child {
      font-size: 0.85rem;
    }

    .side-emilly {
      border-color: rgba(248, 173, 213, 0.9);
      background: #ffe9f7;
      color: #b14581;
    }

    .side-eduardo {
      border-color: rgba(188, 222, 255, 0.98);
      background: #edf5ff;
      color: #33658a;
    }

    .side-both {
      border-color: rgba(191, 172, 255, 0.9);
      background: #f2ecff;
      color: #5b21b6;
    }

    .notes-text {
      color: var(--text-soft);
      font-size: 0.78rem;
      max-width: 260px;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    .notes-empty {
      color: var(--text-muted);
      font-size: 0.72rem;
      font-style: italic;
    }

    .badge-status-table {
      display: inline-flex;
      align-items: center;
      padding: 2px 7px;
      border-radius: 999px;
      font-size: 0.7rem;
      gap: 5px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      border: 1px solid transparent;
    }

    .badge-status-table span {
      width: 7px;
      height: 7px;
      border-radius: 50%;
    }

    .badge-status-pending {
      background: #f9fafb;
      color: #64748b;
      border-color: rgba(148, 163, 184, 0.8);
    }

    .badge-status-pending span {
      background: linear-gradient(135deg, #e5e7eb, #9ca3af);
    }

    .badge-status-confirmed {
      background: #ecfdf3;
      color: #15803d;
      border-color: rgba(34, 197, 94, 0.96);
    }

    .badge-status-confirmed span {
      background: linear-gradient(135deg, #4ade80, #22c55e);
    }

    .badge-status-maybe {
      background: #fef9c3;
      color: #92400e;
      border-color: rgba(234, 179, 8, 0.96);
    }

    .badge-status-maybe span {
      background: linear-gradient(135deg, #facc15, #eab308);
    }

    .badge-status-declined {
      background: #fef2f2;
      color: #b91c1c;
      border-color: rgba(239, 68, 68, 0.96);
    }

    .badge-status-declined span {
      background: linear-gradient(135deg, #fb7185, #ef4444);
    }

    .footer-note {
      margin-top: 10px;
      font-size: 0.74rem;
      color: var(--text-soft);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    .footer-note strong {
      color: #b14581;
    }

    .highlight {
      color: var(--accent-strong);
      font-weight: 600;
    }

    .empty-state {
      padding: 20px 14px;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.8rem;
    }

    .empty-state span {
      display: block;
      margin-bottom: 4px;
    }

    .empty-state .emoji {
      font-size: 1.5rem;
      margin-bottom: 4px;
    }

    .btn-row {
      display: flex;
      gap: 6px;
      justify-content: flex-end;
      flex-wrap: wrap;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title-group">
        <div class="title-row">
          <h1>Lista de convidados</h1>
          <div class="tag-love">
            <span>üíç</span>
            <span>Eduardo &amp; Emilly ‚Äî Amor eterno</span>
          </div>
        </div>
        <div class="subtitle">
          Controle de presen√ßa, organiza√ß√£o e amor em um s√≥ lugar.
        </div>
        <div class="names-script">
          Eduardo &amp; Emilly
        </div>
      </div>
      <div class="header-actions">
        <button type="button" class="btn btn-outline" id="loadDefaultBtn">
          üí´ Carregar lista Eduardo &amp; Emilly
        </button>
        <button type="button" class="btn btn-outline-alt" id="clearAllBtn">
          ‚ú® Limpar tudo
        </button>
      </div>
    </header>

    <div class="stats">
      <div class="stat-card">
        <div class="stat-label">
          <span class="badge-dot dot-all"></span>
          Total convidados
        </div>
        <div class="stat-value" id="statTotal">0</div>
        <div class="stat-badge" id="statTotalSide"></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">
          <span class="badge-dot dot-confirmed"></span>
          Confirmados
        </div>
        <div class="stat-value" id="statConfirmed">0</div>
        <div class="stat-badge" id="statConfirmedPercent">0%</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">
          <span class="badge-dot dot-maybe"></span>
          Talvez
        </div>
        <div class="stat-value" id="statMaybe">0</div>
        <div class="stat-badge" id="statMaybePercent">0%</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">
          <span class="badge-dot dot-declined"></span>
          N√£o vai
        </div>
        <div class="stat-value" id="statDeclined">0</div>
        <div class="stat-badge" id="statDeclinedPercent">0%</div>
      </div>
    </div>

    <div class="layout">
      <!-- FORMUL√ÅRIO -->
      <section class="card">
        <div class="card-header">
          <div>
            <div class="card-title">
              <span>‚ûï</span>
              <span id="formTitle">Novo convidado</span>
            </div>
            <div class="card-subtitle" id="formSubtitle">
              Adicione pessoas e mantenha tudo organizado.
            </div>
          </div>
          <div class="chip">
            üíæ
            <span>Salvo automaticamente no navegador</span>
          </div>
        </div>

        <form id="guestForm">
          <div class="form-grid">
            <div class="form-group">
              <label for="guestName">Nome</label>
              <input
                type="text"
                id="guestName"
                placeholder="Ex: Tia Ana, Jo√£o, Amigos do Eduardo"
                required
              />
            </div>
            <div class="form-group">
              <label for="guestSide">Lado</label>
              <select id="guestSide">
                <option value="Emilly">Emilly</option>
                <option value="Eduardo">Eduardo</option>
                <option value="Ambos">Ambos</option>
                <option value="Outro">Outro / Fam√≠lia mista</option>
              </select>
            </div>
            <div class="form-group">
              <label for="guestStatus">Status</label>
              <select id="guestStatus">
                <option value="pending">N√£o respondeu</option>
                <option value="confirmed">Confirmado</option>
                <option value="maybe">Talvez</option>
                <option value="declined">N√£o vai</option>
              </select>
            </div>
            <div class="form-group">
              <label for="guestNotes">Observa√ß√µes</label>
              <input
                type="text"
                id="guestNotes"
                placeholder="Ex: casal com 2 filhos, prefere mesa perto da sa√≠da..."
              />
            </div>
          </div>

          <div id="editNotice" class="edit-notice" style="display:none;">
            <span>‚úèÔ∏è Editando: <strong id="editNameLabel"></strong></span>
            <button type="button" id="cancelEditBtn">Cancelar edi√ß√£o</button>
          </div>

          <div class="form-footer">
            <button type="button" class="btn btn-outline-alt" id="resetFormBtn">
              Limpar campos
            </button>
            <button type="submit" class="btn btn-primary" id="submitBtn">
              üíå Adicionar convidado
            </button>
          </div>
        </form>
      </section>

      <!-- TABELA -->
      <section class="card">
        <div class="card-header">
          <div>
            <div class="card-title">
              <span>üìã</span>
              <span>Lista de convidados</span>
            </div>
            <div class="card-subtitle">
              Atualize status de presen√ßa direto na lista.
            </div>
          </div>
        </div>

        <div class="filters">
          <div class="filters-left">
            <div class="input-inline">
              <span>üîç</span>
              <input
                type="text"
                id="searchInput"
                placeholder="Buscar por nome..."
              />
            </div>
            <select id="filterSide" class="select-compact">
              <option value="all">Lado: Todos</option>
              <option value="Emilly">S√≥ Emilly</option>
              <option value="Eduardo">S√≥ Eduardo</option>
              <option value="Ambos">Ambos</option>
              <option value="Outro">Outro / Mistos</option>
            </select>
            <select id="filterStatus" class="select-compact">
              <option value="all">Status: Todos</option>
              <option value="pending">N√£o respondeu</option>
              <option value="confirmed">Confirmado</option>
              <option value="maybe">Talvez</option>
              <option value="declined">N√£o vai</option>
            </select>
          </div>
          <div class="filters-right">
            <div class="btn-row">
              <button type="button" class="btn-outline-alt btn" id="importBtn">
                ‚¨ÜÔ∏è Importar
              </button>
              <button type="button" class="btn-outline btn" id="exportJsonBtn">
                ‚¨áÔ∏è Exportar
              </button>
            </div>
            <input type="file" id="importFileInput" accept="application/json" style="display:none;" />
          </div>
        </div>

        <div class="table-wrapper" id="tableWrapper">
          <table>
            <thead>
              <tr>
                <th class="col-name">Nome</th>
                <th class="col-side">Lado</th>
                <th class="col-status">Status</th>
                <th class="col-notes">Observa√ß√µes</th>
                <th class="col-actions">A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="guestTableBody">
              <!-- Linhas geradas via JS -->
            </tbody>
          </table>
          <div class="empty-state" id="emptyState" style="display:none;">
            <div class="emoji">‚ú®</div>
            <span>Sem convidados ainda...</span>
            <span>
              Use o bot√£o <strong>"Carregar lista Eduardo &amp; Emilly"</strong> ou adicione manualmente no formul√°rio ao lado.
            </span>
          </div>
        </div>
      </section>
    </div>

    <div class="footer-note">
      <div>
        <strong>Dica:</strong> este controle fica salvo no seu navegador. Se limpar o cache ou usar outro dispositivo, a lista some.
      </div>
      <div>
        Feito com <span class="highlight">amor</span> pro casamento de voc√™s. üíó
      </div>
    </div>
  </div>

  <script>
    // ------------ Dados iniciais da lista padr√£o -------------
    const defaultGuests = [
      // Parte da Emilly
      { name: "Elza", side: "Emilly" },
      { name: "Lucivaldo", side: "Emilly" },
      { name: "Cyndell", side: "Emilly" },
      { name: "Heloysa", side: "Emilly" },
      { name: "Selma", side: "Emilly" },
      { name: "Saline", side: "Emilly" },
      { name: "Paulo", side: "Emilly" },
      { name: "Gabi", side: "Emilly" },
      { name: "Salin", side: "Emilly" },
      { name: "Niquita", side: "Emilly" },
      { name: "Marcos", side: "Emilly" },
      { name: "Jo√£o", side: "Emilly" },
      { name: "Garcia", side: "Emilly" },
      { name: "Ramile", side: "Emilly" },
      { name: "Maria", side: "Emilly" },
      { name: "Simon", side: "Emilly" },
      { name: "Raquel", side: "Emilly" },
      { name: "Ant√¥nio", side: "Emilly" },
      { name: "Carol", side: "Emilly" },
      { name: "Firmino", side: "Emilly" },
      { name: "Gabriel", side: "Emilly" },
      { name: "Mulher Gabriel", side: "Emilly" },
      { name: "Vinicius", side: "Emilly" },
      { name: "Gi", side: "Emilly" },
      { name: "Laura", side: "Emilly" },
      { name: "Jaqueline", side: "Emilly" },
      { name: "Eduardo da Jaqueline", side: "Emilly" },
      { name: "Taiana", side: "Emilly" },
      { name: "Jassiara", side: "Emilly" },
      { name: "Rosalina", side: "Emilly" },
      { name: "Eliane", side: "Emilly" },
      { name: "Fernando", side: "Emilly" },
      { name: "Julia filha Eliane", side: "Emilly" },
      { name: "Yaskara", side: "Emilly" },
      { name: "Valentina", side: "Emilly" },
      { name: "Maria (2)", side: "Emilly" },
      { name: "V√≥ Anita", side: "Emilly" },
      { name: "Marido V√≥ Anita", side: "Emilly" },

      // Parte do Eduardo
      { name: "Dilamar", side: "Eduardo" },
      { name: "Geneci", side: "Eduardo" },
      { name: "Kiko", side: "Eduardo" },
      { name: "Antonni", side: "Eduardo" },
      { name: "Sara", side: "Eduardo" },
      { name: "Nair", side: "Eduardo" },
      { name: "Dete", side: "Eduardo" },
      { name: "Dionatan", side: "Eduardo" },
      { name: "Aline", side: "Eduardo" },
      { name: "Filho 1 Aline", side: "Eduardo" },
      { name: "Filho 2 Aline", side: "Eduardo" },
      { name: "Marido Aline", side: "Eduardo" },
      { name: "Alisson", side: "Eduardo" },
      { name: "Mulher Alisson", side: "Eduardo" },
      { name: "Pame", side: "Eduardo" },
      { name: "Leno", side: "Eduardo" },
      { name: "Bruno", side: "Eduardo" },
      { name: "Henrique", side: "Eduardo" },
      { name: "Gustavo", side: "Eduardo" },
      { name: "Leo", side: "Eduardo" },
      { name: "Beneficio", side: "Eduardo" },
      { name: "Carol", side: "Eduardo" },
      { name: "Gelair", side: "Eduardo" },
      { name: "Carol 2", side: "Eduardo" },
      { name: "Christian", side: "Eduardo" },
      { name: "Anderson", side: "Eduardo" },
      { name: "Cleide", side: "Eduardo" },
      { name: "Chica", side: "Eduardo" },
      { name: "Josue", side: "Eduardo" },
      { name: "Joao Lucas", side: "Eduardo" },
      { name: "Janda", side: "Eduardo" },
      { name: "Filha Janda", side: "Eduardo" },
      { name: "Filho 1 Janda", side: "Eduardo" },
      { name: "Filho 2 Janda", side: "Eduardo" },
      { name: "Aderlan", side: "Eduardo" },
      { name: "Mulher Aderlan", side: "Eduardo" },
      { name: "Filha Aderlan", side: "Eduardo" }
    ];

    // ----------------------- Estado principal -----------------------
    let guests = [];
    const STORAGE_KEY = "wedding-guests-eduardo-emilly";
    let editingId = null;

    // ----------------------- Helpers -----------------------
    function createGuestId() {
      return (
        Date.now().toString(36) + "-" + Math.random().toString(36).slice(2, 8)
      );
    }

    function normalizeGuest(g) {
      return {
        id: g.id || createGuestId(),
        name: g.name || "",
        side: g.side || "Outro",
        status: g.status || "pending",
        notes: g.notes || ""
      };
    }

    function saveGuests() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(guests));
    }

    function loadGuests() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return [];
      try {
        const parsed = JSON.parse(raw);
        if (Array.isArray(parsed)) {
          return parsed.map(normalizeGuest);
        }
      } catch (e) {
        console.warn("Erro ao ler localStorage:", e);
      }
      return [];
    }

    function statusLabel(status) {
      switch (status) {
        case "confirmed":
          return "Confirmado";
        case "maybe":
          return "Talvez";
        case "declined":
          return "N√£o vai";
        default:
          return "N√£o respondeu";
      }
    }

    function sideLabel(side) {
      switch (side) {
        case "Emilly":
        case "Eduardo":
        case "Ambos":
        case "Outro":
          return side;
        default:
          return side || "N/D";
      }
    }

    function sideClass(side) {
      if (side === "Emilly") return "side-emilly";
      if (side === "Eduardo") return "side-eduardo";
      if (side === "Ambos") return "side-both";
      return "";
    }

    function statusClass(status) {
      switch (status) {
        case "confirmed":
          return "status-confirmed";
        case "maybe":
          return "status-maybe";
        case "declined":
          return "status-declined";
        default:
          return "status-pending";
      }
    }

    function statusBadgeClass(status) {
      switch (status) {
        case "confirmed":
          return "badge-status-table badge-status-confirmed";
        case "maybe":
          return "badge-status-table badge-status-maybe";
        case "declined":
          return "badge-status-table badge-status-declined";
        default:
          return "badge-status-table badge-status-pending";
      }
    }

    function updateStats() {
      const total = guests.length;
      const confirmed = guests.filter(g => g.status === "confirmed").length;
      const maybe = guests.filter(g => g.status === "maybe").length;
      const declined = guests.filter(g => g.status === "declined").length;

      const emillyCount = guests.filter(g => g.side === "Emilly").length;
      const eduardoCount = guests.filter(g => g.side === "Eduardo").length;

      const pct = v => (total > 0 ? Math.round((v / total) * 100) : 0);

      document.getElementById("statTotal").textContent = total;
      document.getElementById("statConfirmed").textContent = confirmed;
      document.getElementById("statMaybe").textContent = maybe;
      document.getElementById("statDeclined").textContent = declined;

      document.getElementById("statConfirmedPercent").textContent =
        pct(confirmed) + "%";
      document.getElementById("statMaybePercent").textContent =
        pct(maybe) + "%";
      document.getElementById("statDeclinedPercent").textContent =
        pct(declined) + "%";

      const statTotalSide = document.getElementById("statTotalSide");
      if (total === 0) {
        statTotalSide.textContent = "";
      } else {
        statTotalSide.textContent = `Emilly: ${emillyCount} ¬∑ Eduardo: ${eduardoCount}`;
      }
    }

    function renderGuests() {
      const tbody = document.getElementById("guestTableBody");
      const emptyState = document.getElementById("emptyState");

      tbody.innerHTML = "";

      const search = document
        .getElementById("searchInput")
        .value.trim()
        .toLowerCase();
      const filterSide = document.getElementById("filterSide").value;
      const filterStatus = document.getElementById("filterStatus").value;

      const filtered = guests.filter(g => {
        if (search && !g.name.toLowerCase().includes(search)) return false;
        if (filterSide !== "all" && g.side !== filterSide) return false;
        if (filterStatus !== "all" && g.status !== filterStatus) return false;
        return true;
      });

      if (filtered.length === 0) {
        emptyState.style.display = "block";
      } else {
        emptyState.style.display = "none";
      }

      filtered.forEach(guest => {
        const tr = document.createElement("tr");

        // Nome
        const tdName = document.createElement("td");
        tdName.className = "col-name";
        tdName.textContent = guest.name;
        tr.appendChild(tdName);

        // Lado
        const tdSide = document.createElement("td");
        tdSide.className = "col-side";
        const pill = document.createElement("div");
        pill.className = `pill-side ${sideClass(guest.side)}`;
        pill.innerHTML = `<span>${
          guest.side === "Emilly"
            ? "üíú"
            : guest.side === "Eduardo"
            ? "üíô"
            : guest.side === "Ambos"
            ? "üíó"
            : "ü§ç"
        }</span><span>${sideLabel(guest.side)}</span>`;
        tdSide.appendChild(pill);
        tr.appendChild(tdSide);

        // Status
        const tdStatus = document.createElement("td");
        tdStatus.className = "col-status";

        const select = document.createElement("select");
        select.className = `status-select ${statusClass(guest.status)}`;
        select.innerHTML = `
          <option value="pending">N√£o respondeu</option>
          <option value="confirmed">Confirmado</option>
          <option value="maybe">Talvez</option>
          <option value="declined">N√£o vai</option>
        `;
        select.value = guest.status || "pending";
        select.addEventListener("change", () => {
          guest.status = select.value;
          select.className = `status-select ${statusClass(guest.status)}`;
          badge.className = statusBadgeClass(guest.status || "pending");
          badgeLabel.textContent = statusLabel(guest.status);
          saveGuests();
          updateStats();
        });
        tdStatus.appendChild(select);

        const badge = document.createElement("div");
        badge.className = statusBadgeClass(guest.status || "pending");
        const dot = document.createElement("span");
        const badgeLabel = document.createElement("span");
        badgeLabel.textContent = statusLabel(guest.status);
        badge.appendChild(dot);
        badge.appendChild(badgeLabel);
        badge.style.marginTop = "4px";
        tdStatus.appendChild(badge);

        tr.appendChild(tdStatus);

        // Observa√ß√µes
        const tdNotes = document.createElement("td");
        tdNotes.className = "col-notes";
        if (guest.notes && guest.notes.trim()) {
          const spanNotes = document.createElement("span");
          spanNotes.className = "notes-text";
          spanNotes.textContent = guest.notes;
          tdNotes.appendChild(spanNotes);
        } else {
          const spanEmpty = document.createElement("span");
          spanEmpty.className = "notes-empty";
          spanEmpty.textContent = "Sem observa√ß√µes";
          tdNotes.appendChild(spanEmpty);
        }
        tr.appendChild(tdNotes);

        // A√ß√µes
        const tdActions = document.createElement("td");
        tdActions.className = "col-actions";

        const editBtn = document.createElement("button");
        editBtn.type = "button";
        editBtn.className = "btn-icon";
        editBtn.title = "Editar convidado";
        editBtn.textContent = "‚úèÔ∏è";
        editBtn.style.marginRight = "4px";
        editBtn.addEventListener("click", () => {
          startEditGuest(guest);
        });

        const deleteBtn = document.createElement("button");
        deleteBtn.type = "button";
        deleteBtn.className = "btn-icon btn-danger";
        deleteBtn.title = "Remover convidado";
        deleteBtn.textContent = "‚úñ";
        deleteBtn.addEventListener("click", () => {
          if (
            confirm(
              `Remover "${guest.name}" da lista? Essa a√ß√£o n√£o pode ser desfeita.`
            )
          ) {
            guests = guests.filter(g => g.id !== guest.id);
            saveGuests();
            updateStats();
            renderGuests();
          }
        });

        tdActions.appendChild(editBtn);
        tdActions.appendChild(deleteBtn);
        tr.appendChild(tdActions);

        tbody.appendChild(tr);
      });
    }

    // ----------------------- Edi√ß√£o -----------------------
    function startEditGuest(guest) {
      editingId = guest.id;
      document.getElementById("guestName").value = guest.name;
      document.getElementById("guestSide").value = guest.side;
      document.getElementById("guestStatus").value = guest.status || "pending";
      document.getElementById("guestNotes").value = guest.notes || "";

      document.getElementById("editNotice").style.display = "flex";
      document.getElementById("editNameLabel").textContent = guest.name;
      document.getElementById("submitBtn").innerHTML = "üíæ Salvar altera√ß√µes";
      document.getElementById("formTitle").textContent = "Editar convidado";
      document.getElementById("formSubtitle").textContent =
        "Ajuste as informa√ß√µes e salve para atualizar a lista.";
      document.getElementById("guestName").focus();
    }

    function cancelEdit() {
      editingId = null;
      document.getElementById("guestForm").reset();
      document.getElementById("guestSide").value = "Emilly";
      document.getElementById("guestStatus").value = "pending";
      document.getElementById("editNotice").style.display = "none";
      document.getElementById("submitBtn").innerHTML = "üíå Adicionar convidado";
      document.getElementById("formTitle").textContent = "Novo convidado";
      document.getElementById("formSubtitle").textContent =
        "Adicione pessoas e mantenha tudo organizado.";
    }

    // ----------------------- Exportar / Importar -----------------------
    function exportGuests() {
      if (!guests.length) {
        alert("N√£o h√° convidados para exportar.");
        return;
      }
      const data = JSON.stringify(guests, null, 2);
      const blob = new Blob([data], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "convidados-eduardo-emilly.json";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    function handleImportFile(file) {
      const reader = new FileReader();
      reader.onload = e => {
        try {
          const data = JSON.parse(e.target.result);
          if (!Array.isArray(data)) {
            alert("Arquivo inv√°lido: o conte√∫do n√£o √© uma lista.");
            return;
          }
          const normalized = data.map(normalizeGuest);

          if (guests.length > 0) {
            const replace = confirm(
              "Deseja SUBSTITUIR a lista atual pelos convidados do arquivo?\n\nOK = substituir tudo\nCancelar = mesclar (apenas novos nomes)."
            );
            if (replace) {
              guests = normalized;
            } else {
              const existingKeys = new Set(
                guests.map(g => (g.id ? g.id : g.name.toLowerCase() + "|" + g.side))
              );
              normalized.forEach(ng => {
                const key = ng.id ? ng.id : ng.name.toLowerCase() + "|" + ng.side;
                if (!existingKeys.has(key)) {
                  guests.push(ng);
                }
              });
            }
          } else {
            guests = normalized;
          }

          saveGuests();
          updateStats();
          renderGuests();
          alert("Convidados importados com sucesso!");
        } catch (err) {
          console.error(err);
          alert("Erro ao importar arquivo. Verifique se √© um JSON v√°lido.");
        }
      };
      reader.readAsText(file, "utf-8");
    }

    // ----------------------- Inicializa√ß√£o -----------------------
    function init() {
      guests = loadGuests();
      updateStats();
      renderGuests();

      const form = document.getElementById("guestForm");
      const resetFormBtn = document.getElementById("resetFormBtn");
      const cancelEditBtn = document.getElementById("cancelEditBtn");
      const nameInput = document.getElementById("guestName");
      const sideInput = document.getElementById("guestSide");
      const statusInput = document.getElementById("guestStatus");
      const notesInput = document.getElementById("guestNotes");

      form.addEventListener("submit", e => {
        e.preventDefault();
        const name = nameInput.value.trim();
        if (!name) return;

        if (editingId) {
          // Atualiza convidado existente
          const guest = guests.find(g => g.id === editingId);
          if (guest) {
            guest.name = name;
            guest.side = sideInput.value || "Outro";
            guest.status = statusInput.value || "pending";
            guest.notes = notesInput.value.trim();
          }
          saveGuests();
          updateStats();
          renderGuests();
          cancelEdit();
        } else {
          // Novo convidado
          const newGuest = normalizeGuest({
            id: createGuestId(),
            name,
            side: sideInput.value || "Outro",
            status: statusInput.value || "pending",
            notes: notesInput.value.trim()
          });
          guests.push(newGuest);
          saveGuests();
          updateStats();
          renderGuests();
          form.reset();
          sideInput.value = "Emilly";
          statusInput.value = "pending";
          nameInput.focus();
        }
      });

      resetFormBtn.addEventListener("click", () => {
        form.reset();
        sideInput.value = "Emilly";
        statusInput.value = "pending";
        nameInput.focus();
      });

      cancelEditBtn.addEventListener("click", cancelEdit);

      // Filtros
      document
        .getElementById("searchInput")
        .addEventListener("input", renderGuests);
      document
        .getElementById("filterSide")
        .addEventListener("change", renderGuests);
      document
        .getElementById("filterStatus")
        .addEventListener("change", renderGuests);

      // Carregar lista padr√£o
      document
        .getElementById("loadDefaultBtn")
        .addEventListener("click", () => {
          const proceed =
            guests.length === 0 ||
            confirm(
              "Isso vai adicionar os convidados padr√£o Eduardo & Emilly √† lista atual (sem duplicar nomes).\n\nDeseja continuar?"
            );
          if (!proceed) return;

          const existingKeys = new Set(
            guests.map(g => g.name.toLowerCase() + "|" + g.side)
          );
          defaultGuests.forEach(g => {
            const key = g.name.toLowerCase() + "|" + g.side;
            if (!existingKeys.has(key)) {
              guests.push(
                normalizeGuest({
                  name: g.name,
                  side: g.side,
                  status: "pending",
                  notes: ""
                })
              );
            }
          });

          saveGuests();
          updateStats();
          renderGuests();
        });

      // Limpar tudo
      document.getElementById("clearAllBtn").addEventListener("click", () => {
        if (
          confirm(
            "Tem certeza que deseja limpar TODOS os convidados?\n\nEssa a√ß√£o n√£o pode ser desfeita."
          )
        ) {
          guests = [];
          saveGuests();
          updateStats();
          renderGuests();
          cancelEdit();
        }
      });

      // Exportar
      document
        .getElementById("exportJsonBtn")
        .addEventListener("click", exportGuests);

      // Importar
      const importBtn = document.getElementById("importBtn");
      const importInput = document.getElementById("importFileInput");
      importBtn.addEventListener("click", () => {
        importInput.value = "";
        importInput.click();
      });
      importInput.addEventListener("change", e => {
        const file = e.target.files && e.target.files[0];
        if (file) {
          handleImportFile(file);
        }
      });
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
